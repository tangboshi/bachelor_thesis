#!/bin/bash
# These are the default options IF NOT OVERWRITTEN by a job file!
#********************************* Options ************************************
DEBUG_MODE=1
## Path and remote options
#Remote options
REMOTE_MEASUREMENT=0
REMOTE_IP=134.130.223.151
REMOTE_FLAGS=YC4
REMOTE_USER=inets
REMOTE_TO_MOUNT_PATH=/home/$REMOTE_USER
REMOTE_MEASUREMENT_MOUNT_POINT=/home/$USER/mnt/$REMOTE_IP

# Other paths
if [ $REMOTE_MEASUREMENT -eq 1 ]; then
  THIS_PATH=$REMOTE_MEASUREMENT_MOUNT_POINT
  else
    THIS_PATH=$( cd $(dirname $0) ; pwd -P )
fi

if [ $DEBUG_MODE -eq 1 ]; then
  mkdir -p $THIS_PATH/debug
  THIS_PATH=$THIS_PATH/debug
fi

echo "THIS_PATH is: "$THIS_PATH"."

if [ $REMOTE_MEASUREMENT -eq 1 ]; then
  LOCATE_BASE_PATH=$REMOTE_MEASUREMENT_MOUNT_POINT/source/gr-inets/examples
else
  #LOCATE_BASE_PATH=$THIS_PATH
  LOCATE_BASE_PATH=/home/inets/source/gr-inets/examples/Tests
fi

JOBS_OPEN_PATH=$THIS_PATH/jobs_open
JOBS_DONE_PATH=$THIS_PATH/jobs_done
PLOT_PY_PATH=$THIS_PATH/py
LOG_PATH=$THIS_PATH/logs
export PLOT_DIRECTORY_PATH=$THIS_PATH/plots
export DATA_SOURCE_PATH=$THIS_PATH/data

if [ $DEBUG_MODE -eq 1 ]; then
  # Needed because in case of debug mode THIS_PATH=$THIS_PATH/debug
  PLOT_PY_PATH=$( cd $(dirname $0) ; pwd -P )/py
fi

if [ $REMOTE_MEASUREMENT -eq 1 ]; then
  MEASUREMENT_SCRIPT_PATH=$LOCATE_BASE_PATH/Tests
  export RAW_DATA_SOURCE_PATH=$REMOTE_MEASUREMENT_MOUNT_POINT/source/gr-inets/results
else
  MEASUREMENT_SCRIPT_PATH=$LOCATE_BASE_PATH
    #MEASUREMENT_SCRIPT_PATH=$LOCATE_BASE_PATH/py/fake_measurements
  #export RAW_DATA_SOURCE_PATH=$MEASUREMENT_SCRIPT_PATH/measurement_raw
    export RAW_DATA_SOURCE_PATH=/home/inets/source/gr-inets/results
fi

## Premature death checks
CHECK_IF_PREMATURELY_ABORTED=0
PLOT_IF_PREMATURELY_ABORTED=0
## Python Version
PLOT_PYTHON_VERSION=3
MEASUREMENT_PYTHON_VERSION=2
OS=UBUNTU

case $OS in
  "ARCH")
    if    [ $MEASUREMENT_PYTHON_VERSION -eq 2 ]; then MEASURE_PY=python2;
    elif  [ $MEASUREMENT_PYTHON_VERSION -eq 3 ]; then MEASUERE_PY=python; fi
    if    [ $PLOT_PYTHON_VERSION -eq 2 ]; then PLOT_PY=python2;
    elif  [ $PLOT_PYTHON_VERSION -eq 3 ]; then PLOT_PY=python; fi
  ;;

  "UBUNTU")
    if    [ $MEASUREMENT_PYTHON_VERSION -eq 2 ]; then MEASUERE_PY=python;
    elif  [ $MEASUREMENT_PYTHON_VERSION -eq 3 ]; then MEASUERE_PY=python3; fi
    if    [ $PLOT_PYTHON_VERSION -eq 2 ]; then PLOT_PY=python;
    elif  [ $PLOT_PYTHON_VERSION -eq 3 ]; then PLOT_PY=python3; fi
  ;;
esac

#********************* Important Measurement Variables ************************
## Series options (!MOST IMPORTANT VARIABLES HERE)
TIMER=1
export MEASUREMENT_REPETITIONS=5
MEASUREMENT_SCRIPTS=( measure.py )
#MEASUREMENT_SCRIPTS=( two_way_handshake_Rx.py  two_way_handshake_Tx.py )
MEASUREMENT_OUTPUT_FILES=( t1DQ.txt t1CS.txt t2RXe.txt t2e.txt )
export MEASUREMENT_OUTPUT_FILES=${MEASUREMENT_OUTPUT_FILES[*]}
PLOT_SCRIPTS=( cdf.py )
## Plot options
PLOT_ENABLED=1
export PLOT_SAVE_ENABLED=1
# The name of the saved files
export PLOT_NAMES_TRUNK=untitled
#******************************************************************************
#    SET THIS TO 0 IF YOU WANT TO CARRY OUT MULTIPLE MEASUREMENTS IN A ROW!   *
#******************************************************************************
export SHOW_PLOT_AFTER_MEASUREMENT=1
MOVE_AFTER_JOB_DONE=0
## Specific plot parameters
# Required to have the correct values for some calculations (absolute values)
export PACKET_SIZE=1000 #bytes
#*****************************************************************************#
#DUMMY VARIABLES
#******************************************************************************
